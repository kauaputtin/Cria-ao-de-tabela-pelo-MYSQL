CREATE DATABASE IF NOT EXISTS PASSAGENS_AEREAS;
USE PASSAGENS_AEREAS;

CREATE TABLE IF NOT EXISTS PASSAGEIROS(
COD_PASSAGEIRO INT PRIMARY KEY,
NOME VARCHAR(100) NOT NULL,
SOBRENOME VARCHAR(100) NOT NULL,
DATA_NASC DATE NOT NULL,
NACIONALIDADE VARCHAR(100) NOT NULL
);

INSERT INTO PASSAGEIROS
(COD_PASSAGEIRO,NOME,SOBRENOME,DATA_NASC,NASCIONALIDADE)
VALUES
(1,"ROBERTO","CARLOS","2000-12-05","BRASILEIRO");
(2,"MICHAEL","CAYMAN","1980-12-06","AMERICANO");
(3,"BETO","MONTEIRO","1990-12-07","BRASILEIRO");
(4,"GUSTAVO","SILVA","1990-02-10","BRASILEIRO");
(5,"LUIZ","SOARES","1990-05-01","BRASILEIRO");

#ATUALIZANDO DADOS DA TABELA
UPDATE PASSAGEIROS SET NOME = "MARIA"
WHERE SOBRENOME = "ANTONIETA"

CREATE TABLE IF NOT EXISTS AEROPORTOS(
ID_AEROPORTO INT PRIMARY KEY,
NOME VARCHAR(100) NOT NULL,
CIDADE VARCHAR(100) NOT NULL,
ESTADO VARCHAR(100) NOT NULL,
PAIS VARCHAR(100) NOT NULL,
LATITUDE VARCHAR(50) NOT NULL,
LONGITUDE VARCHAR(50) NOT NULL,
TAMANHO_PISTA DECIMAL(20,1) NOT NULL
);

INSERT INTO AEROPORTOS
(ID_AEROPORTO,NOME,CIDADE,ESTADO,PAIS,LATITUDE,LONGITUDE,TAMANHO_PISTA)
VALUES
(1,"AERO1","VITORIA","ES","BRASIL","33.0000","333.0000","3500m");
(2,"AERO2","RIO DE JANEIRO","RJ","BRASIL","34.0000","444.0000","3600m");
(3,"AERO3","SAO PAULO","SP","BRASIL","35.0000","555.0000","3700m");
(4,"AERO4","PRADO","BA","BRASIL","36.0000","666.0000","4000m");
(5,"AERO5","LOS ANGELES","CALIFORNIA","EUA","37.0000","777.0000","3900M");

CREATE TABLE IF NOT EXISTS CIA_AEREAS(
ID_CIA INT PRIMARY KEY,
CNPJ VARCHAR(20) NOT NULL,
NOME_FANTASIA VARCHAR(100) NOT NULL
);

INSERT INTO CIA_AEREAS
(ID_CIA,CNPJ,NOME_FANTASIA)
VALUES
(1, "11 111 111/1111-11","DELTA AIR LINES"); 
(2,"22 222 222/2222-22","EMIRATES"); 
(3,"33 333 333/3333-33","VOE"); 
(4,"44 444 444/4444-44","AIR");
(5,"55 555 555/5555-55","AEROVOE");

CREATE TABLE IF NOT EXISTS RESERVAS(
ID_RESERVA INT PRIMARY KEY,
DATA_RESERVA DATE NOT NULL,
FORMA_PGTO ENUM("DINHEIRO","PIX","DEBITO","CREDITO") NOT NULL,
VALOR_RESERVA DECIMAL(10,2) NOT NULL
);

INSERT INTO RESERVAS 
(ID_RESERVA,DATA_RESERVA,FORMA_PAGAMENTO,VALOR_RESERVA)
VALUES
(1,"2024-05-13","PIX","R$2000");
(2,"2024-06-14","CART√ÉO","R$3000");
(3,"2024-07-15","BOLETO","R$4000");
(4,"2024-08-16","CHEQUE","R$5000");
(5,"2024-10-20","DINHEIRO","R$2600");

CREATE TABLE IF NOT EXISTS AERONAVES(
PFX_AERO VARCHAR(20) PRIMARY KEY,
MODELO VARCHAR(50) NOT NULL,
ANO_FABR YEAR NOT NULL,
FABRICANTE VARCHAR(50) NOT NULL,
POLTRONAS INT NOT NULL,
CIA_AEREA INT NOT NULL,
CONSTRAINT CIA_AERO FOREIGN KEY(CIA_AEREA) REFERENCES CIA_AEREAS(ID_CIA));

INSERT INTO AERONAVES
(PFX_AERO,MODELO,ANO_FABR,FABRICANTE,POLTRONAS,CIA_AEREA)
VALUES
(111, 1,"2017","AIRPLANE","70","DELTA AIR LINES");
(222, 2,"2018","AEROBUILD","80","EMIRATES");
(333, 3,"2020","VOENOW","90","VOE");
(444, 4,"2022","INDUSTRIEAERO", "50", "AIR");
(555, 5,"2024","GOEPLANE","75","AEROVOE");

CREATE TABLE IF NOT EXISTS VOOS(
ID_VOO INT,
ASSENTO VARCHAR(10),
AERO_PART INT NOT NULL,
DATA_PART DATE NOT NULL,
HORA_PART TIME NOT NULL,
AERO_CHEG INT NOT NULL,
DATA_CHEG DATE NOT NULL,
HORA_CHEG TIME NOT NULL,
AERONAVE VARCHAR(20) NOT NULL,
CIA_AEREA INT NOT NULL,
PRIMARY KEY(ID_VOO,ASSENTO),
CONSTRAINT AEROP_VOO1 FOREIGN KEY(AERO_PART) REFERENCES AEROPORTOS(ID_AEROPORTO),
CONSTRAINT AEROP_VOO2 FOREIGN KEY(AERO_CHEG) REFERENCES AEROPORTOS(ID_AEROPORTO),  
CONSTRAINT AERON_VOO FOREIGN KEY(AERONAVE) REFERENCES AERONAVES(PFX_AERO),
CONSTRAINT CIA_VOO FOREIGN KEY(CIA_AEREA) REFERENCES CIA_AEREAS(ID_CIA)
);

INSERT INTO VOOS 
(ID_VOO,ASSENTO,AERO_PART,DATA_PART,HORA_PART,AERO_CHEG_DATA_CHEG,HORA_CHEG,AERONAVE,CIA_AEREA)
VALUES
(1,"45",1,"2024-12-10","15:00;00",1,"2024-12-10","21:00;00","MIKE","DELTA AIR LINES");
(2,"50",2,"2024-12-11","16:00;00",2,"2024-12-12","01:30;00","DELTA","EMIRATES");
(3,"60",3,"2025-12-12","17:00;00",3,"2025-12-13","22:20;00","ASA","VOE");
(4,"20",4,"2024-05-29","12:00;00",4,"2024-06-29","18:00;00","PLANE","AIR");
(5,"12",5,"2024-07-15","14:00;00",5,"2024-07-15","19:00;00","CELTA","AEROVOE");

CREATE TABLE IF NOT EXISTS VOOS_RESERVAS(
ID_VOO INT,
ASSENTO VARCHAR(10),
ID_RESERVA INT,
PRIMARY KEY(ID_VOO,ASSENTO,ID_RESERVA),
CONSTRAINT VR1 FOREIGN KEY(ID_VOO,ASSENTO) REFERENCES VOOS(ID_VOO,ASSENTO),
CONSTRAINT VR2 FOREIGN KEY(ID_RESERVA) REFERENCES RESERVAS(ID_RESERVA)
);

INSERT INTO VOOS_RESERVAS
(ID_VOO,ASSENTO,ID_RESERVA)
VALUE
(1,"50",1);
(2,"01",2);
(3,"12",3);
(4,"60",4);
(5,"40",5);

CREATE TABLE IF NOT EXISTS PASSAGEIROS_RESERVAS(
PASSAGEIRO INT,
ID_RESERVA INT,
PRIMARY KEY(PASSAGEIRO,ID_RESERVA),
CONSTRAINT PR1 FOREIGN KEY(PASSAGEIRO) REFERENCES PASSAGEIROS(COD_PASSAGEIRO),
CONSTRAINT PR2 FOREIGN KEY(ID_RESERVA) REFERENCES RESERVAS(ID_RESERVA));

INSERT INTO PASSAGEIROS_RESERVAS
(PASSAGEIRO,ID_RESERVA)
VALUE
("ROBERTO",1);
("BETO",2);
("GUSTAVO",3);
("IGOR",4);
("PEDRO",5);


